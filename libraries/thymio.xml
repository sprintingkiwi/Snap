<blocks app="Snap! 5.1, http://snap.berkeley.edu" version="1"><block-definition s="imposta potenza motore %&apos;motor&apos; a %&apos;power&apos;" type="command" category="motion"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">tutti<options>sinistro&#xD;destro&#xD;tutti</options></input><input type="%n">100</input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="motor"/><l>tutti</l></block><script><block s="fork"><block s="reifyScript"><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>motor.right.target</l><l>/</l><block var="power"/></list></block></custom-block><list></list></block></script><list></list></block><list></list></block><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>motor.left.target</l><l>/</l><block var="power"/></list></block></custom-block><list></list></block></script><script><block s="doIfElse"><block s="reportEquals"><block var="motor"/><l>sinistro</l></block><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>motor.left.target</l><l>/</l><block var="power"/></list></block></custom-block><list></list></block></script><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>motor.right.target</l><l>/</l><block var="power"/></list></block></custom-block><list></list></block></script></block></script></block></script></block-definition><block-definition s="ferma motori" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="imposta potenza motore %txt a %n"><l>tutti</l><l>0</l></custom-block></script></block-definition><block-definition s="accendi LED %&apos;which&apos; con colore rosso %&apos;R&apos; verde %&apos;G&apos; blu %&apos;B&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">superiori<options>superiori&#xD;inferiori sinistra&#xD;inferiori destra&#xD;tutti</options></input><input type="%n">0<options>0&#xD;25&#xD;50&#xD;100</options></input><input type="%n">0<options>0&#xD;25&#xD;50&#xD;100</options></input><input type="%n">0<options>0&#xD;25&#xD;50&#xD;100</options></input></inputs><script><block s="doIf"><block s="reportEquals"><block var="which"/><l>superiori</l></block><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_top/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block></script></block><block s="doIf"><block s="reportEquals"><block var="which"/><l>inferiori sinistra</l></block><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_bottom/0/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block></script></block><block s="doIf"><block s="reportEquals"><block var="which"/><l>inferiori destra</l></block><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_bottom/1/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block></script></block><block s="doIf"><block s="reportEquals"><block var="which"/><l>tutti</l></block><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_top/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_bottom/0/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>V_leds_bottom/1/</l><block var="R"/><l>/</l><block var="G"/><l>/</l><block var="B"/></list></block></custom-block><list></list></block></script></block></script></block-definition><block-definition s="bottone %&apos;which&apos; premuto" type="predicate" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">forward<options>avanti=forward&#xD;indietro=backward&#xD;centrale=center&#xD;sinistra=left&#xD;destra=right</options></input></inputs><script><block s="doReport"><block s="reportEquals"><l>1</l><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>button.</l><block var="which"/></list></block></custom-block></custom-block></block></block></block></script></block-definition><block-definition s="ostacolo rilevato %&apos;direction&apos;" type="predicate" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">davanti<options>davanti&#xD;dietro</options></input></inputs><script><block s="doReport"><block s="reportLessThan"><custom-block s="distanza %s"><block var="direction"/></custom-block><l>150</l></block></block></script></block-definition><block-definition s="inclinato %&apos;direzione&apos;" type="predicate" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">a destra<options>a destra&#xD;a sinistra&#xD;in avanti&#xD;indietro</options></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="direzione"/><l>a destra</l></block><script><block s="doReport"><block s="reportLessThan"><custom-block s="inclinazione %txt"><l>sinistra-destra</l></custom-block><l>-8</l></block></block></script><script><block s="doIfElse"><block s="reportEquals"><block var="direzione"/><l>a sinistra</l></block><script><block s="doReport"><block s="reportGreaterThan"><custom-block s="inclinazione %txt"><l>sinistra-destra</l></custom-block><l>8</l></block></block></script><script><block s="doIfElse"><block s="reportEquals"><block var="direzione"/><l>in avanti</l></block><script><block s="doReport"><block s="reportLessThan"><custom-block s="inclinazione %txt"><l>avanti-indietro</l></custom-block><l>-8</l></block></block></script><script><block s="doReport"><block s="reportGreaterThan"><custom-block s="inclinazione %txt"><l>avanti-indietro</l></custom-block><l>8</l></block></block></script></block></script></block></script></block></script></block-definition><block-definition s="distanza %&apos;sensors&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true">davanti<options>davanti&#xD;dietro</options></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="sensors"/><l>davanti</l></block><script><block s="doReport"><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>distance.front</l></custom-block></custom-block></block></block></script><script><block s="doReport"><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>distance.back</l></custom-block></custom-block></block></block></script></block></script></block-definition><block-definition s="sensore a infrarossi %&apos;id&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n" readonly="true">1<options>davanti sinistra=1&#xD;davanti centro-sinistra=2&#xD;davanti centro=3&#xD;davanti centro-destra=4&#xD;davanti destra=5&#xD;dietro sinistra=6&#xD;dietro destra=7&#xD;sotto sinistra=8&#xD;sotto destra=9</options></input></inputs><script><block s="doIfElse"><block s="reportLessThan"><block var="id"/><l>8</l></block><script><block s="doDeclareVariables"><list><l>a</l><l>b</l></list></block><block s="doSetVar"><l>a</l><block s="reportListItem"><block var="id"/><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>prox.horizontal</l></custom-block></custom-block></block></block><block s="doSetVar"><l>b</l><block s="reportQuotient"><block var="a"/><l>100</l></block></block><block s="doReport"><block var="b"/></block></script><script><block s="doReport"><block s="reportListItem"><block s="reportDifference"><block var="id"/><l>7</l></block><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>prox.ground.delta</l></custom-block></custom-block></block></block></script></block></script></block-definition><block-definition s="inclinazione %&apos;axis&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">sinistra-destra<options>sinistra-destra&#xD;avanti-indietro</options></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="axis"/><l>sinistra-destra</l></block><script><block s="doReport"><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>acc</l></custom-block></custom-block></block></block></script><script><block s="doIfElse"><block s="reportEquals"><block var="axis"/><l>avanti-indietro</l></block><script><block s="doReport"><block s="reportListItem"><l>2</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>acc</l></custom-block></custom-block></block></block></script><script><block s="doReport"><block s="reportListItem"><l>3</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>acc</l></custom-block></custom-block></block></block></script></block></script></block></script></block-definition><block-definition s="quello che sto ascoltando in lingua %&apos;lang&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s">it<options>english=en&#xD;italiano=it&#xD;français=fr&#xD;deutsch=de&#xD;español=es&#xD;português=pt</options></input></inputs><script><block s="doDeclareVariables"><list><l>a</l><l>b</l></list></block><block s="doSetVar"><l>b</l><block s="reportBoolean"><l><bool>false</bool></l></block></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>start_speech_recognition</l><list><block s="reifyScript"><script><block s="doSetVar"><l>a</l><l></l></block><block s="doSetVar"><l>b</l><block s="reportBoolean"><l><bool>true</bool></l></block></block></script><list></list></block><l></l><l></l><block var="lang"/></list></custom-block><block s="doWaitUntil"><block s="reportEquals"><block var="b"/><block s="reportBoolean"><l><bool>true</bool></l></block></block></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>stop_speech_recognition</l><list></list></custom-block><block s="doReport"><block var="a"/></block></script><scripts><script x="377" y="31.499999999999996"><custom-block s="set language to %s"><block var="lang"/></custom-block></script><script x="237" y="64"><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>set_default_language</l><list><block var="lang"/></list></custom-block></script></scripts></block-definition><block-definition s="traduci %&apos;text&apos; da %&apos;source&apos; a %&apos;target&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%s">it<options>english=en&#xD;italiano=it&#xD;français=fr&#xD;deutsch=de&#xD;español=es&#xD;português=pt</options></input><input type="%s">en<options>english=en&#xD;italiano=it&#xD;français=fr&#xD;deutsch=de&#xD;español=es&#xD;português=pt</options></input></inputs><script><block s="doDeclareVariables"><list><l>a</l><l>b</l></list></block><block s="doSetVar"><l>a</l><block s="reportURL"><block s="reportJoinWords"><list><l>https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20190111T145502Z.3ec30219cc85ebc6.c6e53fafc6843f63600c56d38c6857c0988f6670&amp;text=</l><block var="text"/><l>&amp;lang=</l><block var="source"/><l>-</l><block var="target"/><l>&amp;format=plain</l></list></block></block></block><block s="doWarp"><script><block s="doForEach"><l>each item</l><block s="evaluate"><block s="reportJSFunction"><list><l>jsonString</l></list><l>return listify(JSON.parse(jsonString));&#xD;&#xD;function listify(jsonObject) {&#xD;  if (jsonObject instanceof Array) {&#xD;    return new List(jsonObject.map(function(eachElement) { return listify(eachElement)}));&#xD;  } else if (jsonObject instanceof Object) {&#xD;    return new List(Object.keys(jsonObject).map(function(eachKey) { return new List([eachKey,listify(jsonObject[eachKey])])} ))&#xD;  } else {&#xD;    return jsonObject&#xD;  }&#xD;}</l></block><list><block var="a"/></list></block><script><block s="doIf"><block s="reportEquals"><block s="reportListItem"><l>1</l><block var="each item"/></block><l>text</l></block><script><block s="doSetVar"><l>b</l><block s="reportListItem"><l>2</l><block var="each item"/></block></block></script></block></script></block></script></block><block s="doReport"><block s="reportListItem"><l>1</l><block var="b"/></block></block></script></block-definition><block-definition s="parla %&apos;text&apos; con voce %&apos;lang&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%s">it<options>english=en&#xD;italiano=it&#xD;français=fr&#xD;deutsch=de&#xD;español=es&#xD;português=pt</options></input></inputs><script><block s="bubble"><block var="text"/></block><block s="doDeclareVariables"><list><l>a</l></list></block><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="text"/><l></l><l></l><l></l><l></l><block var="lang"/><block s="reifyScript"><script><block s="doSetVar"><l>a</l><block s="reportBoolean"><l><bool>true</bool></l></block></block></script><list></list></block></list></custom-block><block s="doWaitUntil"><block var="a"/></block><block s="bubble"><l></l></block></script></block-definition><block-definition s="listify %&apos;jsonString&apos;" type="reporter" category="operators"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>jsonString</l></list><l>return listify(JSON.parse(jsonString));&#xD;&#xD;function listify(jsonObject) {&#xD;  if (jsonObject instanceof Array) {&#xD;    return new List(jsonObject.map(function(eachElement) { return listify(eachElement)}));&#xD;  } else if (jsonObject instanceof Object) {&#xD;    return new List(Object.keys(jsonObject).map(function(eachKey) { return new List([eachKey,listify(jsonObject[eachKey])])} ))&#xD;  } else {&#xD;    return jsonObject&#xD;  }&#xD;}</l></block><list><block var="jsonString"/></list></block></block></script></block-definition><block-definition s="volume microfono thymio" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>mic.intensity</l></custom-block></custom-block></block></block></script></block-definition><block-definition s="Comando thymio %&apos;cmd&apos;" type="reporter" category="other"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="reportURL"><block s="reportJoinWords"><list><l>http://localhost:3000/nodes/thymio-II/</l><block var="cmd"/></list></block></block></block></script></block-definition><block-definition s="produci suono thymio %&apos;id&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%n">1</input></inputs><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>A_sound_system/</l><block var="id"/></list></block></custom-block><list></list></block></script></block-definition><block-definition s="%&apos;volume&apos; microfono PC" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%txt" readonly="true">volume<options>volume&#xD;nota</options></input></inputs><script><block s="doIfElse"><block s="reportEquals"><block var="volume"/><l>volume</l></block><script><block s="doReport"><block s="reportAudio"><l><option>volume</option></l></block></block></script><script><block s="doReport"><block s="reportAudio"><l><option>note</option></l></block></block></script></block></script></block-definition><block-definition s="emetti segnale %&apos;value&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doRun"><custom-block s="Comando thymio %s"><block s="reportJoinWords"><list><l>prox.comm.tx</l><l>/</l><block var="value"/></list></block></custom-block><list></list></block></script></block-definition><block-definition s="ricevi segnale" type="reporter" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="reportListItem"><l>1</l><custom-block s="listify %s"><custom-block s="Comando thymio %s"><l>prox.comm.rx</l></custom-block></custom-block></block></block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;&#xD;&#xD;    ecraft2learn.run(function_name, parameters);&#xD;&#xD;&#xD;} else {&#xD;&#xD;&#xD;   var script = document.createElement("script");&#xD;&#xD;&#xD;   script.type = "text/javascript";&#xD;&#xD;&#xD;   script.addEventListener(&apos;error&apos;, function () {&#xD;&#xD;&#xD;          alert("Unable to load https://ecraft2learn.github.io/ai/ecraft2learn.js. Check your network connection.");&#xD;&#xD;&#xD;   });&#xD;&#xD;&#xD;   script.src = "https://ecraft2learn.github.io/ai/ecraft2learn.js";&#xD;&#xD;&#xD;   script.addEventListener(&apos;load&apos;, function () {&#xD;&#xD;&#xD;          ecraft2learn.run(function_name, parameters);&#xD;&#xD;&#xD;   });&#xD;&#xD;&#xD;   document.head.appendChild(script);&#xD;&#xD;&#xD;}&#xD;&#xD;&#xD;</l></block><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition></blocks>